# EduHub Workspace 기능 구현 명세서

이 문서는 EduHub Workspace 프로젝트에서 구현된 전반적인 기능과 시스템 구조를 정리한 명세서입니다.

---

## 1. 프로젝트 개요
**EduHub Workspace**는 학교 및 교육 기관 내 구성원들의 효율적인 협업과 소통을 지원하는 통합 플랫폼입니다. 실시간 공지, 자원 예약, 설문 조사, 링크 공유 등의 기능을 제공하며, 역할 기반의 접근 제어와 직관적인 Glassmorphism UI를 특징으로 합니다.

---

## 2. 모듈별 핵심 기능

### 🔐 2.1 인증 및 보안 (Authentication & Security)
- **Google 로그인 연동**: Firebase Auth를 활용한 소셜 로그인 지원.
- **역할 기반 접근 제어 (RBAC)**:
  - `SuperAdmin` (시스템 전체 관리), `Admin` (조직 관리자), `User` (일반 사용자) 등급 구분.
  - 중요 기능(설문 삭제, 조직 설정 등) 접근 시 권한 검증.
- **비로그인 사용자 리다이렉트**:
  - 보안이 필요한 모든 페이지(`surveys`, `reservations`, `bookmarks` 등) 접근 시 자동 감지.
  - 로그인 페이지로 이동 후, 로그인 성공 시 원래 접속하려던 페이지로 자동 복귀 (`redirect` 파라미터 활용).
- **비밀번호 보안 관리**:
  - 이메일/비밀번호 로그인 사용자를 위한 **비밀번호 재설정(수정) 기능** 제공.
  - 사용자가 직접 비밀번호 재설정 메일을 발송하여 보안 링크를 통해 변경 가능.
- **필수 정보 가드 (Profile Guard)**:
  - 조직에 소속되었으나 `부서명` 또는 `연락처`가 누락된 경우, 서비스 이용 전 프로필 완성을 강제함.
  - '미지정' 등의 불완전한 데이터를 방지하여 데이터 정합성 유지.

### 📢 2.2 공지사항 (Notices)
- **날짜별 타임라인 UI**: 특정 날짜를 선택하여 과거/미래의 공지를 조회.
- **공지 유형 구분**:
  - `전체 공용`: 시스템 전역 공지.
  - `조직 공용`: 특정 학교/조직 내 공지.
  - 예약 게시 및 만료(Expire) 자동 태깅.
- **안 읽은 공지 알림 시스템**:
  - 사용자가 읽지 않은 중요 시스템 공지(Global Notice)가 있을 경우 메인 화면 진입 시 모달 팝업으로 강제 노출.
- **Markdown 및 첨부파일**: 텍스트 서식(Markdown) 지원 및 파일 첨부/다운로드.
- **파일 업로드 최적화**:
  - 이미지 자동 압축 (Canvas API 활용).
  - 조직별 업로드 용량 제한 준수.

### 📊 2.3 설문 조사 (Surveys)
- **설문 생성 및 관리**:
  - 다양한 문항 타입 지원: `객관식`, `다중선택`, `주관식`, **`파일 제출`**, `설명/자료(Notice)`.
  - 설문 복제(Duplicate) 기능 제공 (작성자 편의성).
- **설문 목록 필터링 및 정렬**:
  - **3중 탭 시스템**: `진행중` (피응답), `응답완료` (참여 완료), `내 설문` (본인 작성)으로 구분하여 관리.
  - **마감 임박순 정렬**: 마감일이 가장 가까운 설문을 최상단에 노출 (`endDate` 오름차순).
  - **상태 보존(Persistence)**: 상세 페이지나 결과 페이지를 조회하고 돌아오더라도 이전에 보던 탭 상태를 URL 파라미터를 통해 완벽히 복원.
- **설문 참여 및 상세**:
  - 참여자 익명/실명 처리 (설정에 따름).
  - 본인이 제출한 응답 수정 가능 (기간 내).
  - 파일 문항 응답 시 파일 업로드 및 미리보기 지원.
  - 상세 페이지 내 작성자 정보 및 마감 기한 시각화 개선.
- **결과 분석 및 데이터 추출**:
  - 실시간 응답 통계 (문항별 그래프/텍스트 목록).
  - **응답 현황 사이드바**: 응답자/미응답자 목록 실시간 확인 및 필터링.
  - **데이터 다운로드**:
    - `📥 엑셀 다운로드`: 응답 내역 전체를 CSV/Excel화.
    - `🗂️ 첨부파일 일괄 다운로드 (ZIP)`: 응답자들이 제출한 파일들을 문항별/사용자별로 자동 폴더링하여 압축 다운로드 (JSZip 활용).

### 📅 2.4 자원 예약 (Reservations)
- **주간 캘린더 뷰**: 주 단위(`이전 주` / `오늘` / `다음 주`) 예약 현황 조회.
- **교시(Time Slot) 기반 시간표**: 조직별 커스텀 교시 설정에 따른 그리드(Grid)형 예약판.
- **예약 프로세스**:
  - **즉시 예약**: 별도 승인 없이 바로 확정.
  - **승인 대기**: 관리자 승인이 필요한 자원(승인/반려 프로세스).
  - **중복 방지**: 동일 시간대/자원 중복 예약 원천 차단.
- **편의 기능**:
  - `나의 예약` 하이라이트 및 Tooltip 상세 보기.
  - **다음 주 복사**: 반복적인 회의/수업 예약을 위해 원클릭으로 다음 주 동일 시간 복사.
- **자동 데이터 정리**:
  - 삭제된 자원의 잔여 예약 데이터를 자동으로 정리하여 통계 오류 방지.

### ⭐ 2.5 즐겨찾기 (Bookmarks)
- **3-Layer 링크 관리**:
  - `🌐 전체 공용` / `🏢 조직 공용` / `👤 개인용` 링크 구분.
- **순서 변경(Reorder)**: 화살표 버튼을 통해 링크 배치 순서 자유 변경.
- **아이콘 통일**: 별(⭐) 아이콘으로 일관성 있는 UI 제공.

### 🏢 2.6 조직 및 사용자 관리 (Organization)
- **다중 조직 합류**: 초대 코드를 통해 여러 조직(예: A학교, B동아리)에 동시에 소속 가능하며 자유롭게 전환.
- **프로필 관리**: 
  - 조직별로 다른 닉네임/직책 사용 가능.
  - 본인의 로그인 방식(Google/이메일) 확인 및 계정 정보 통합 관리.
- **강력한 정보 입력 정책**:
  - 신규 가입 및 조직 합류 시 부서명, 연락처 입력을 필수화하여 '미지정' 사용자 발생 원천 차단.
- **동적 환영 메시지**: 메인 페이지에서 현재 선택된 조직명을 기반으로 맞춤형 슬로건 노출.
- **조직별 파일 업로드 관리**:
  - 조직마다 독립적인 파일 용량 제한 설정 (3MB / 5MB / 10MB / 차단).
  - 실시간 스토리지 사용량 추적 (파일 수, 총 용량).
  - 용량 제한 변경 이력 기록 및 조회.

### 🏠 2.7 홈 대시보드 (Home Dashboard)
- **핵심 지표 상단 배치**: 
  - 설문, 예약, 그룹 현황을 상단 3열 카드 형태로 배치하여 중요 정보 접근성 강화.
  - 직관적인 아이콘과 Typography를 활용한 디자인 간소화.
- **설문 조사 카드**: 참여해야 할 미응답 설문 건수 실시간 강조 및 상태 메시지 제공.
- **자원 예약 카드**: 
  - **오늘 예약**: 오늘의 전체 예약 건수를 메인 숫자로 표시하여 활성화 수준 파악.
  - **승인 대기**: 내가 관리자인 자원의 승인 대기 건수를 별도 텍스트로 표기하여 업무 누락 방지.
- **그룹 카드**: 
  - 참여 중인 전체 그룹 수 표시.
  - **업데이트 알림**: 새로운 활동(글, 설문 등)이 있는 그룹의 개수를 빨간색으로 강조 표시.
- **공지사항 하단 배치 및 UX**:
  - 로딩 시 페이드인(Fade-in) 애니메이션 적용으로 부드러운 화면 전환.
  - 텍스트 미리보기 최적화로 리스트 가독성 향상.

### 📱 2.8 PWA (Progressive Web App) 구현
- **설치형 웹 경험**: 모바일 및 데스크탑에서 브라우저 주소창 없이 네이티브 앱처럼 설치 및 구동.
- **오프라인 대응**: 서비스 워커(Service Worker)를 통한 고속 캐싱 및 안정성 확보.
- **맞춤형 아이콘 및 테마**: 브랜드 컬러(Primary Blue)와 로고가 적용된 아이콘 세트 적용.

### 🔔 2.9 실시간 푸시 알림 (Push Notifications) ✅ **구현 완료**
Firebase Cloud Messaging(FCM)을 활용한 실시간 브라우저 알림 시스템.

#### 알림 시스템 아키텍처
- **클라이언트 측 토큰 관리**:
  - `useFcmToken` 훅을 통한 자동 토큰 생성 및 Firestore 저장.
  - 사용자별 다중 디바이스 지원 (`fcmTokens` 배열).
  - 로그인 시 자동 권한 요청 및 토큰 갱신.
- **서버 측 메시지 발송**:
  - Firebase Admin SDK를 활용한 안전한 서버 사이드 발송.
  - `/api/fcm/send` 엔드포인트를 통한 통합 발송 시스템.
  - 다중 타겟 지원: 개별 사용자, 토픽 그룹, 전체 사용자.

#### 토픽 구독 시스템
- **자동 구독 로직**:
  - `all_users`: 모든 사용자 자동 구독 (전체 공지용).
  - `org_{orgId}_member`: 조직 소속 시 자동 구독 (조직 전체 알림).
  - `org_{orgId}_admin`: 관리자 권한 보유 시 자동 구독 (관리자 전용 알림).
- **동적 구독 관리**: 조직 합류/탈퇴 시 자동으로 토픽 구독/해제.

#### 알림 유형 및 트리거
1. **문의 등록 알림**:
   - 사용자가 새 문의를 등록하면 해당 조직의 모든 관리자에게 알림.
   - 토픽: `org_{orgId}_admin`
   - 링크: `/admin/feedback` (관리자 문의 관리 페이지)
   - 내용: 작성자 이름 및 문의 내용 미리보기.

2. **문의 답변 알림**:
   - 관리자가 문의에 답변을 작성하면 원 작성자에게 알림.
   - 타겟: 개별 사용자 (`targetUserId`)
   - 링크: `/` (메인 페이지)
   - 내용: 답변 내용 미리보기.

3. **일일 아침 알림** (예정):
   - 매일 오전 8시(KST) 자동 발송.
   - Vercel Cron Job 연동 (`/api/cron/daily-morning`).
   - 토픽: `all_users`

#### 관리자 도구
- **최고 관리자 알림 관리 탭** (`/admin/super`):
  - 푸시 알림 활성화 사용자 수 실시간 모니터링.
  - 테스트 알림 발송 인터페이스:
    - 나에게만 발송 (개발/테스트용).
    - 전체 사용자 발송 (`all_users`).
    - 조직별 관리자 발송 (`org_{id}_admin`).
    - 조직별 전체 구성원 발송 (`org_{id}_member`).

#### 사용자 알림 설정
- **프로필 페이지 통합**:
  - 알림 권한 상태 확인 (허용됨/차단됨/미설정).
  - 원클릭 권한 요청 버튼.
  - 브라우저별 권한 설정 안내.
- **알림 권한 관리**:
  - 사용자가 언제든 브라우저 설정에서 알림을 끄거나 켤 수 있음.
  - 권한 거부 시에도 서비스 이용에는 영향 없음.

#### 기술 구현 세부사항
- **Service Worker**: `firebase-messaging-sw.js`를 통한 백그라운드 메시지 처리.
- **클릭 액션**: 알림 클릭 시 지정된 URL로 자동 이동.
- **데이터 페이로드**: 제목, 본문, URL, 커스텀 데이터 전송 지원.
- **멀티캐스트**: 한 사용자의 여러 디바이스에 동시 발송 (`sendEachForMulticast`).
- **환경 변수**: `NEXT_PUBLIC_FCM_VAPID_KEY`, `FIREBASE_SERVICE_ACCOUNT_KEY` 필수.

#### 보안 및 프라이버시
- **서버 사이드 발송**: 클라이언트에서 직접 발송 불가, API 라우트를 통한 검증된 발송만 허용.
- **토큰 암호화 저장**: Firestore에 안전하게 저장되며 외부 노출 방지.
- **사용자 동의 기반**: 명시적 권한 요청 후에만 알림 발송.

### 🛡️ 2.10 최고관리자 시스템 (Super Admin Console)
- **최고관리자 지명 및 관리**:
  - 기존 최고관리자가 다른 사용자를 최고관리자로 임명하거나 권한을 해제할 수 있는 통합 관리 탭 제공.
  - **권한 부여일 기록**: 관리 권한이 부여된 날짜를 실시간으로 기록하고 표시하여 운영 투명성 확보.
- **조직 관리 강화**:
  - 조직별 스토리지 용량 제한 설정 및 실시간 사용량 모니터링.
  - 조직 상태 관리 (운영중/중단) 및 변경 이력 추적.
  - 조직 생성/삭제, 초대 코드 관리.
- **통합 대시보드**:
  - 전체 플랫폼 통계 (활성 조직 수, 총 회원 수, 스토리지 사용량).
  - 조직별 멤버 현황 및 권한 관리.

### 📧 2.11 이메일 및 커뮤니케이션 (E-mail System)
- **관리자 전용 비밀번호 제어**:
  - 최고관리자 및 각 조직 관리자가 멤버 관리 화면에서 특정 사용자의 비밀번호 초기화 메일을 직접 발송 가능.
- **스팸 방지 및 신뢰도 최적화**:
  - Firebase 이메일 템플릿 맞춤 설정 및 전용 도메인(SPF/DKIM) 인증 가이드 적용.
  - 발신자 이름 최적화 및 SMTP 서버 연동을 통한 메일 수신율 향상 전략 수립.

---

## 3. UI/UX 디자인 시스템
- **Glassmorphism**: 반투명 유리 질감(`backdrop-filter: blur`)을 활용한 현대적이고 세련된 디자인.
- **반응형 레이아웃**: 데스크탑 및 태블릿/모바일 환경 대응.
- **통일된 헤더 스타일**:
  - 모든 주요 페이지에 일관된 그라데이션 타이틀(`text-gradient`) 및 2.5rem 폰트 사이즈 적용.
  - 각 모듈 성격에 맞는 직관적인 이모지 아이콘 적용:
    - 📢 공지사항, 📝 설문 조사, 🗓️ 자원 예약, ⭐ 즐겨찾기, 👥 그룹.
- **일관된 탭 네비게이션**:
  - 관리자 페이지에서 Pill 스타일 탭 통일.
  - 명확한 아이콘과 라벨로 직관적인 구분.
- **최적화된 가독성**:
  - 헤더 영역은 와이드하게(1400px), 본문 리스트는 집중도 있게(1000px) 폭을 이원화하여 배치.
  - `Toast` 메시징 시스템을 통한 비침해적 사용자 피드백(성공/오류 알림).
- **날짜 표시 통일**:
  - 일관된 날짜 형식 "YYYY. MM. DD.(요일)" 적용 (`dateUtils` 모듈화).

---

## 4. 기술 스택 (Tech Stack)
- **Framework**: [Next.js 15 (App Router)](https://nextjs.org/)
- **Language**: TypeScript
- **Database**: Firebase Firestore (NoSQL)
- **Storage**: Firebase Storage (파일 업로드)
- **Auth**: Firebase Authentication (Google OAuth)
- **Libraries**:
  - `react-markdown`: 게시글 렌더링.
  - `jszip`, `file-saver`: 클라이언트 측 파일 압축 및 다운로드.
  - `xlsx`: 엑셀 데이터 처리.
  - `firebase-admin`: 서버 사이드 FCM 메시지 발송.
  - Firebase Cloud Messaging (FCM): 브라우저 푸시 알림.

---

## 5. 개발 방식 및 환경 (Development)

### 5.1 개발 방법론
- **Agentic Coding**: AI Agent와의 페어 프로그래밍을 통해 요구사항 분석부터 구현, 테스트까지 반복적인 스프린트 방식으로 개발되었습니다.
- **Component-Based Architecture**: 재사용 가능한 컴포넌트(Navbar, AuthProvider, Toast 등) 중심으로 설계하여 유지보수성을 확보했습니다.
- **Serverless**: Firebase를 백엔드로 사용하여 별도의 서버 구축 없이 인증, DB, 스토리지 기능을 구현했습니다 (BaaS).
- **유틸리티 모듈화**:
  - `dateUtils`: 날짜 형식 통일 관리.
  - `fileUtils`: 이미지 압축 및 최적화.

### 5.2 파일 시스템 구조 (Next.js App Router)
```
/public               # 정적 자원
  manifest.json        # PWA 매니페스트 설정
  sw.js                # 서비스 워커
  /icons               # PWA 아이콘 세트
/src
  /app                 # 페이지 라우팅 (App Router)
    /admin             # 관리자 페이지
      /org/...         # 조직 관리자 센터
      /super/...       # 최고 관리자 시스템
    /auth/...          # 인증 관련 페이지
    /bookmarks/...     # 즐겨찾기 페이지
    /groups/...        # 그룹 시스템
    /notice/[date]/... # 날짜별 공지사항 페이지
    /reservations/...  # 자원 예약 페이지 (주간 캘린더)
    /surveys/...       # 설문 관련 페이지 (목록, 상세, 결과)
    layout.tsx         # 전역 레이아웃 (Navbar 포함)
    page.tsx           # 메인(로그인) 페이지
  /components          # 공통 UI 컴포넌트
    /navbar            # 네비게이션 컴포넌트
    Navbar.tsx         # 메인 네비게이션
    OrgStatusGuard.tsx # 조직 상태 가드
  /context             # 전역 상태 관리
    AuthContext.tsx    # 인증 컨텍스트
    ToastContext.tsx   # 토스트 알림
  /hooks               # 커스텀 훅
  /lib                 # 라이브러리 설정
    firebase.ts        # Firebase 초기화
  /utils               # 유틸리티 함수
    dateUtils.ts       # 날짜 포맷팅
    fileUtils.ts       # 파일 압축 및 처리
  /styles              # 전역 스타일
    globals.css        # Glassmorphism 스타일
```

---

## 6. 배포 및 퍼블리싱 (Deployment)

### 6.1 Vercel 배포 (권장)
Next.js의 개발사인 Vercel을 이용하면 가장 쉽고 빠르게 배포할 수 있습니다.

1. **GitHub 업로드**: 프로젝트 코드를 GitHub 리포지토리에 Push 합니다.
2. **Vercel 연동**: [Vercel](https://vercel.com)에 로그인 후 'Add New Project'를 클릭하여 GitHub 리포지토리를 불러옵니다.
3. **환경 변수 설정 (Environment Variables)**:
   - Vercel 프로젝트 설정의 `Settings` > `Environment Variables` 항목으로 이동합니다.
   - 로컬의 `.env.local` 파일에 있는 모든 Firebase 설정값을 등록합니다.
     - `NEXT_PUBLIC_FIREBASE_API_KEY`
     - `NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN`
     - `NEXT_PUBLIC_FIREBASE_PROJECT_ID`
     - `NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET`
     - `NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID`
     - `NEXT_PUBLIC_FIREBASE_APP_ID`
4. **Deploy**: 'Deploy' 버튼을 누르면 자동으로 빌드 및 배포가 진행됩니다. 이후 메인 브랜치에 Push 할 때마다 자동 배포됩니다.

### 6.2 Firebase Hosting
Firebase Hosting을 이용할 수도 있습니다.
1. `npm install -g firebase-tools`
2. `firebase login`
3. `firebase init` (Hosting 선택)
   - 'Use an existing project' 선택
   - 'Do you want to use your public directory?' -> `No` (Next.js SSR 사용 시 추가 설정 필요), 정적 배포(`output: export`) 시 `out` 디렉토리 지정.
   - (Next.js SSR 기능을 온전히 사용하려면 Vercel이 가장 호환성이 좋습니다.)

### 6.3 배포 전 체크리스트
- [ ] `.env.local` 파일의 모든 Firebase 설정이 올바른지 확인
- [ ] `npm run build`로 로컬 빌드 테스트 완료
- [ ] Firebase Security Rules 설정 확인
- [ ] Storage CORS 설정 확인
- [ ] 프로덕션 환경 테스트 완료

---

### 👥 2.11 그룹 시스템 (Groups) ✅ **구현 완료**
소규모 협업 공간 및 커뮤니티 구축 기능.

#### 그룹 생성 및 관리
- **그룹 생성**: 누구나 생성 가능 (자동으로 그룹장 권한 획득).
- **공개/비공개 설정**: 
  - `공개 그룹`: 조직 내 모든 사용자가 탐색하고 가입 신청 가능.
  - `비공개 그룹`: 초대를 통해서만 멤버 추가 가능.
- **그룹 설정 편집**: 그룹장은 그룹명, 설명 수정 가능.

#### 그룹 워크스페이스
- **4-Tab 시스템**: 
  - `📢 공지사항`: 그룹 내 예약 공지 작성, 기간 설정, 편집/삭제.
  - `📊 설문조사`: 그룹 전용 설문 생성 및 결과 조회.
  - `💬 대화방`: 실시간 채팅 기능 (메시지 삭제, 링크 자동 감지).
  - `👥 멤버`: 멤버 목록 조회 및 관리.

#### 그룹 설문조사 개선사항
- **작성자 정보 표준화**: 
  - `authorUid`/`authorName` 필드로 통일 (기존 `creatorUid`/`creatorName` 호환 유지).
  - 그룹 멤버 이름 우선 표시 → 프로필 이름 → Display Name 순으로 폴백.
- **결과 페이지 권한**: 
  - 작성자, 그룹장, 시스템 관리자 접근 가능.
- **채팅 알림 연동**: 
  - 새 설문 생성 시 자동으로 그룹 채팅에 알림 메시지 전송 (링크 포함).
- **네비게이션 개선**: 
  - 그룹 페이지에서 설문 참여 후 다시 그룹으로 복귀 가능 (`returnTo` 파라미터).

#### 그룹 대화방 (채팅)
- **실시간 메시징**: 
  - Firestore 실시간 리스너를 통한 즉시 동기화.
  - 발신자 이름 자동 표시 (그룹 내 프로필 이름 우선).
- **링크 자동 감지**: URL이 포함된 메시지를 자동으로 클릭 가능한 링크로 전환.
- **메시지 삭제**: 
  - 본인 메시지 1분 이내 삭제 가능.
  - 심플한 휴지통 아이콘 버튼.
- **UI 개선**: 
  - 라이트 모드에서 입력창 텍스트 가시성 개선.
  - Enter 전송, Shift+Enter 줄바꿈.

### 💬 2.12 문의 및 피드백 (Feedback) ✅ **구현 완료**
사용자와 관리자 간의 소통을 위한 1:1 문의 채널.

#### 다중 댓글 및 소통 강화
- **다중 답변(Reply) 지원**: 
  - 관리자가 한 문의에 대해 여러 개의 답변을 달 수 있어 지속적인 소통(Thread) 가능.
  - 답변 타임라인 UI 구현.
- **답변 관리 기능**: 
  - 작성한 답변을 개별적으로 수정하거나 삭제 가능.
  - **권한 기반 삭제 정책**: 조직 관리자는 최고 관리자의 답변을 삭제할 수 없도록 보호.
- **답변자 식별 고도화**: 
## 7. 최근 업데이트 현황 (Recent Updates)

### ✅ 완료된 개선 사항

- **2026-01-16**:
  - **푸시 알림 시스템 구축**: 
    - Firebase Cloud Messaging 통합 완료.
    - 문의 등록 시 조직 관리자에게 자동 알림 (`org_{orgId}_admin` 토픽).
    - 관리자 답변 시 문의자에게 개별 알림 (`targetUserId`).
    - 최고 관리자 알림 관리 탭 구현 (활성 사용자 수 모니터링, 테스트 발송).
    - 토픽 기반 그룹 알림 시스템 (`all_users`, `org_{id}_member`, `org_{id}_admin`).
    - 사용자 프로필 페이지에 알림 설정 통합.
    - **버그 수정**: Service Worker 중복 알림 문제 해결 (수동 showNotification 제거).
    - **개선**: 알림 아이콘 표시 추가 (webpush notification 설정).
  - **프로필 페이지 개편**: 
    - UI 섹션 순서 재배치 (조직 정보 수정 → 조직 합류 → 알림 설정 → 계정 관리).
    - 조직 제외 기능을 "현재 소속 정보 수정" 섹션 내부로 통합.
  - **초대 시스템 및 로그인 페이지 개선**:
    - 클립보드 복사 안정성 강화 (비보안 컨텍스트 폴백 메커니즘).
    - 초대 페이지 문구 개선 ("일반 구성원" → "구성원", 조사 자동 조정).
    - 로그인 탭 분리 (이메일 로그인 / Google 로그인).
  - **모바일 네비게이션 최적화**:
    - 최고 관리자 메뉴 접근성 향상 (조직 관리자가 아니어도 시스템 관리 메뉴 노출).
    - 메뉴 활성화 상태 로직 정교화.
    - 시스템 관리 페이지에서 조직명 숨김 처리.
  - **그룹 상세 페이지 모바일 최적화**:
    - 모바일 화면에서 텍스트 라벨 숨김 (아이콘만 표시).
    - 전역 `.mobile-text-hide` 유틸리티 클래스 추가.

- **2026-01-15**:
  - **홈 대시보드 개편**: 주요 통계 카드 상단 배치, 일일 공지 로딩 애니메이션 및 UX 개선.
  - **랜딩 페이지 구현**: 비회원용 소개 페이지, QnA 아코디언, 가입 문의 기능, 테마 변경(Light/Dark/Auto) 토글, PWA 지원 확인.

---

## 8. 향후 계획 (Future Plans)

### 8.1 개선 및 고도화

#### 🔴 우선순위 높음
- **성능 최적화**:
  - 대규모 그룹(멤버 50명 이상)의 사용자 정보 로딩 최적화.
  - Firestore `in` 쿼리 제한(10개) 대응 개선.
  - 이미지 Lazy Loading 구현.

- **스토리지 관리 고도화**:
  - 파일 삭제 시 스토리지 사용량 감소 로직 추가.
  - 첨부파일 미리보기 기능 강화 (이미지, PDF 등).
  - 조직별 스토리지 사용량 그래프 시각화.

#### 🟡 일반 개선 사항
- **다크 모드 시스템화**: 현재 부분적으로 적용된 다크 테마를 시스템 설정에 따라 자동 전환되도록 고도화.
- **데이터 시각화 강화**: 설문 결과 페이지에 `Chart.js` 또는 `Recharts` 라이브러리를 도입하여 응답 통계를 파이 차트, 막대 그래프 등으로 직관적으로 시각화.
- **그룹 업데이트 알림 시스템**:
  - 그룹 목록 페이지(`/groups`)에서 새로운 활동이 있는 그룹 강조 표시 (글로우 효과).
  - 기준: 새 대화, 새 공지사항, 새 설문.
- **검색 기능 강화**:
  - 전역 검색 기능 (공지, 설문, 그룹 등).
  - 파일 검색 및 필터링.

### 8.2 기능 확장
- **그룹 고급 기능**:
  - **그룹 이벤트 캘린더**: 그룹 전용 일정 관리 및 공유.
  - **파일 공유함**: 그룹 내 문서/자료 업로드 및 다운로드.
  - **역할 시스템**: 그룹장 외에 부그룹장, 일반 멤버 등 역할 세분화.
  - **멤버 초대 링크**: 고유 링크를 통한 간편 초대.

- **설문 고급 기능**:
  - **설문 템플릿**: 자주 사용하는 설문 형식을 템플릿으로 저장 및 재사용.
  - **조건부 질문 분기**: 특정 답변에 따라 다음 질문이 달라지는 로직.
  - **익명 모드 강화**: IP/디바이스 기반 중복 응답 방지.

- **실시간 알림 (Push Notification)** ✅ **구현 완료**:
  - ~~중요 공지나 예약 승인/반려 시 브라우저 알림 전송 (FCM 활용).~~
  - ~~그룹 메시지 알림 (그룹 채팅에 새 메시지가 올 때).~~
  - **추가 확장 계획**:
    - 예약 승인/반려 알림.
    - 설문 마감 임박 알림.
    - 그룹 채팅 신규 메시지 알림.
    - 공지사항 게시 알림 (중요 공지).

- **관리자 대시보드 강화**:
  - 조직 내 가입자 통계, 활동 로그, 자원 사용률 시각화.
  - 그룹별 활동 통계 (활성 그룹, 휴면 그룹 식별).
  - 스토리지 사용량 트렌드 분석.

### 8.3 추가 아이디어
- **AI 기반 공지 요약**: 긴 공지사항을 자동으로 3줄 요약.
- **다국어 지원**: 한국어, 영어 등 다국어 인터페이스 제공.
- **모바일 앱**: React Native 또는 Flutter를 활용한 네이티브 앱 개발.
- **통합 일정 관리**: 예약 시스템과 개인 캘린더(Google Calendar, Outlook) 연동.
- **게이미피케이션**: 활동 포인트, 배지 시스템으로 사용자 참여 유도.

---

## 9. 개발 가이드 및 모범 사례

### 9.1 코드 작성 원칙
- **컴포넌트 재사용**: 공통 UI 패턴은 컴포넌트로 분리.
- **타입 안정성**: TypeScript의 강력한 타입 시스템 활용.
- **에러 처리**: 모든 비동기 작업에 try-catch 구현 및 사용자 피드백 제공.
- **성능 최적화**: 불필요한 리렌더링 방지 (useMemo, useCallback 활용).

### 9.2 유지보수 체크리스트
- [ ] 모든 새 기능에 대한 Toast 피드백 제공
- [ ] Firebase Security Rules 업데이트
- [ ] 타입 정의 추가 (interface/type)
- [ ] 에러 핸들링 구현
- [ ] 모바일 반응형 확인
- [ ] 접근성(a11y) 고려

### 9.3 Git 커밋 컨벤션
```
feat: 새로운 기능 추가
fix: 버그 수정
docs: 문서 수정
style: 코드 포맷팅, 세미콜론 누락 등
refactor: 코드 리팩토링
perf: 성능 개선
test: 테스트 코드
chore: 빌드 업무, 패키지 매니저 설정 등
```

---

## 부록: Firebase 보안 규칙 참고

### Firestore Security Rules
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // 조직 문서: 멤버만 읽기, 관리자만 수정
    match /organizations/{orgId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null &&
        (get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'superadmin');
    }

    // 사용자 프로필: 본인만 수정, 모두 읽기
    match /users/{userId} {
      allow read: if request.auth != null;
      allow write: if request.auth.uid == userId ||
        get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'superadmin';
    }
  }
}
```

### Storage Security Rules
```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // 조직별 파일 업로드 제한 체크
    match /notices/{orgId}/{fileName} {
      allow read: if request.auth != null;
      allow write: if request.auth != null &&
        request.resource.size < 10 * 1024 * 1024; // 최대 10MB
    }
  }
}
```

---

**문서 최종 업데이트**: 2026-01-15
**프로젝트 버전**: 1.2.0
**작성자**: EduHub Development Team
